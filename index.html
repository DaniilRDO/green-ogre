<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<title>SECURE TERMINAL</title>

<style>
body {
    background: black;
    color: #00ff66;
    font-family: monospace;
    padding: 20px;
}

.hidden { display: none; }

#terminal {
    white-space: pre-wrap;
    min-height: 200px;
    margin-bottom: 20px;
}

input, button {
    background: black;
    color: #00ff66;
    border: 1px solid #00ff66;
    font-family: monospace;
    padding: 6px;
}
    
#timer {
    font-size: 26px;
    margin-bottom: 15px;
}

.panic {
    background: #200;
    color: red;
    animation: blink 1s infinite;
}

.fake-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
    gap: 25px;
}

.fake-box label {
    display: block;
    margin-bottom: 6px;
    text-align: center;
    opacity: 0.7;
}

.quiz-item {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 8px;
}

.light {
    width: 12px;
    height: 12px;
    border-radius: 50%;
    background: #300;
}
.light.green { background: #00ff66; }
.light.red { background: red; }

.screamer {
    position: fixed;
    inset: 0;
    background: black;
    z-index: 999;
    display: flex;
    justify-content: center;
    align-items: center;
}
.screamer img {
    max-width: 100%;
    max-height: 100%;
    object-fit: contain;
}


.alarm-bg {
    background: radial-gradient(circle, #400 0%, #000 100%) !important;
    animation: alarm-blink 0.5s infinite alternate;
}

@keyframes alarm-blink {
    from { background-color: #000; }
    to { background-color: #600; }
}

.scrolling-text {
    position: absolute;
    white-space: nowrap;
    font-size: 50px;
    font-weight: bold;
    color: red;
    animation: scroll-left-to-right 10s linear forwards;
}

@keyframes scroll-left-to-right {
    from { left: -100%; }
    to { left: 100%; }
}

#blackout {
    position: fixed;
    inset: 0;
    background: black;
    z-index: 10000;
    display: none;
    justify-content: center;
    align-items: center;
    color: #111; /* Дуже тьмяний текст */
}

    .random-shape {
    position: fixed;
    pointer-events: none; /* Щоб фігури не заважали клікати */
    z-index: 90;
    opacity: 0.8;
}

#mega-button {
    /* Твої існуючі стилі (розмір, колір, шрифт) залишаються */
    
    /* Додай або зміни ці параметри: */
    position: relative; /* Це дозволить JS перехопити контроль */
    transition: all 0.1s ease; /* Додасть плавності переміщенню */
    z-index: 1000;
    cursor: pointer;
    user-select: none; /* Щоб текст на кнопці не виділявся при швидких кліках */
}

     .stage12-grid {
    display: flex;
    flex-direction: column;
    gap: 20px;
    position: relative;
    min-height: 400px;
}

.right-code-container {
    align-self: flex-end; /* Код праворуч */
    text-align: right;
}

.bottom-code-container {
    margin-top: auto; /* Секрет башти внизу */
    text-align: center;
}

#yellow-msg {
    color: yellow;
    border-left: 3px solid yellow;
    padding-left: 10px;
    max-width: 300px;
    margin-top: 20px;
    animation: slideIn 0.5s ease-out;
}

@keyframes slideIn {
    from { transform: translateX(-100%); opacity: 0; }
    to { transform: translateX(0); opacity: 1; }
}



    .stage13-container {
    text-align: center;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 20px;
}

.morshu-video {
    width: 80%;
    max-width: 500px;
    border: 2px solid red;
}

.reboot-btn {
    padding: 15px 30px;
    font-size: 20px;
    cursor: pointer;
    background: red;
    color: white;
    font-weight: bold;
    border: none;
    box-shadow: 0 0 15px red;
}

.reboot-btn:hover {
    background: #ff4444;
}


.fade-in-out {
    font-size: 32px;
    color: lime;
    text-align: center;
    margin-top: 20%;
    opacity: 0;
    animation: fadeInOutAnim 5s ease-in-out forwards;
}

@keyframes fadeInOutAnim {
    0% { opacity: 0; }
    20% { opacity: 1; }
    80% { opacity: 1; }
    100% { opacity: 0; }
}
</style>
</head>

<body>

<div id="timer">60:00</div>
<div id="terminal"></div>

<div style="display: flex; gap: 10px;">
    <input id="input" placeholder="ENTER CODE" style="flex-grow: 1;">
    <button id="changeTextBtn">ПочатОк розслідування</button>
</div>

   
<div id="stage5-container" class="hidden">
    <div id="hint-box" style="color: yellow; font-size: 1.2em; margin-bottom: 10px;"></div>
    <div id="secret-text-area" style="background: black; line-height: 1.6; cursor: default; margin-bottom: 20px;"></div>
    <input id="inputStage5" placeholder="ВВЕДІТЬ ВІДПОВІДЬ">
</div>



<div id="stage6-container" class="hidden" style="text-align: center; padding-top: 50px;">
    <div id="click-counter" style="font-size: 72px; font-weight: bold; margin-bottom: 20px;">500</div>
    <div id="final-code-display" class="hidden" style="font-size: 80px; color: gold; text-shadow: 0 0 20px yellow; margin-bottom: 20px;">СДВГ</div>
    
    <button id="mega-button" style="width: 200px; height: 200px; border-radius: 50%; font-size: 24px; cursor: pointer; border: 5px solid white;">ТИЦЯЙ!</button>
    
    <div id="final-input-stage6" class="hidden" style="margin-top: 30px;">
        <input id="inputStage6" placeholder="ENTER FINAL CODE" style="font-size: 20px; padding: 10px;">
    </div>
</div>

<div id="flash-overlay" style="position: fixed; inset: 0; pointer-events: none; z-index: 100; opacity: 0;"></div>



<div id="stage7-container" class="hidden">
    <div id="quiz-fields" style="display: grid; gap: 20px; margin-top: 20px;"></div>
</div>



    <div id="stage8-container" class="hidden" style="text-align: center;">
    <div id="jameson-wrap">
        <label for="photo-upload" style="cursor: pointer; border: 2px dashed #00ff66; padding: 20px; display: inline-block;">
            ЗАВАНТАЖИТИ ФОТО ПАВУКА (JPEG/PNG)
        </label>
        <input type="file" id="photo-upload" accept="image/*" style="display: none;">
    </div>
    <div id="upload-status" style="margin-top: 20px; color: yellow;"></div>
</div>

<audio id="spidermanAudio" src="людинапавук.mp3"></audio>




<div id="stage10-container" class="hidden" style="text-align: center;">
    <div id="ogre-dialogue" style="font-size: 1.2em; line-height: 1.5; margin-bottom: 30px;"></div>
    
    <div id="restart-section" style="margin-bottom: 50px;">
        <button id="restart-button" style="padding: 15px 30px; font-size: 1.5em; background: #550000; color: white; border: 3px solid red; cursor: pointer;">
            РЕСТАРТ
        </button>
    </div>

    <div id="final-choice-section" style="margin-top: 30px;">
        <h2 style="color: #00ff66; margin-bottom: 15px;">СПАСТИ:</h2>
        <select id="save-option" style="background: black; color: #00ff66; border: 1px solid #00ff66; padding: 10px; font-size: 1em; width: 300px;">
            <option value="1">10 дітей</option>
            <option value="2">не обязательно черных</option>
            <option value="3">или</option>
            <option value="4">ахахахахахахах</option>
            <option value="5">МЕГА ПАЧКА ЧИПСОВ</option>
            <option value="6">с КРАБОМ ллллллллееееееейс</option>
        </select>
        <button id="send-choice-button" style="margin-left: 10px; padding: 10px 20px; background: #004400; color: white; border: 1px solid #00ff66; cursor: pointer;">
            НАДІСЛАТИ
        </button>
    </div>
</div>

<audio id="finalScreamerAudio" src="finalA.mp3"></audio>


<div id="stage11-container" class="hidden" style="position: fixed; inset: 0; background: black; overflow: hidden; z-index: 10001;">
    <div id="numbers-grid" style="display: flex; flex-wrap: wrap; gap: 5px; justify-content: center; align-items: center; height: 100%; font-size: 1.2em; color: #333; cursor: pointer;">
        </div>
</div>


    
    
<div id="fakeFields" class="hidden"></div>
<div id="quiz" class="hidden"></div>

<audio id="beep" src="beep.mp3"></audio>
<audio id="scream1" src="test.mp3"></audio>
<audio id="hacker" src="hacker.ogg"></audio>   
<audio id="screamEnd" src="endtimes.mp3"></audio>

<script>
let stage = 1;
let timeLeft = 3600;
let timerInterval;

const terminal = document.getElementById("terminal");
const input = document.getElementById("input");
const timerDisplay = document.getElementById("timer");
const beep = document.getElementById("beep");

let typingInterval; // Додайте цю змінну на початку скрипта

/* Логіка кнопки*/
document.getElementById("changeTextBtn").onclick = function() {
    const alternativeText = `Перший контакт із аномалією показав:
стандартні методи не працюють.

Агент, який покладається лише на руки,
— приречений.

ВАШЕ ЗАВДАННЯ:
відкрити цей конверт БЕЗ використання рук.

Дозволено:
– рот
– лікоть
– коліно
– сила тяжіння

Заборонено:
– здоровий глузд
– допомога ззовні

Пам’ятайте: якщо це виглядає тупо,
значить ви все робите правильно.`;

    typeText(alternativeText);
    this.remove();
};



    
function typeText(text, cb) {
    if (typingInterval) clearInterval(typingInterval); // Зупиняємо попередній друк
    let i = 0;
    terminal.innerHTML = "";
    typingInterval = setInterval(() => {
        terminal.innerHTML += text[i++];
        if (i >= text.length) {
            clearInterval(typingInterval);
            if (cb) cb();
        }
    }, 18);
}

function startTimer() {
    // Очищуємо старий таймер, щоб не було прискорення
    if (timerInterval) clearInterval(timerInterval); 
    
    timerInterval = setInterval(() => {
        timeLeft--;
        if (timeLeft <= 60) document.body.classList.add("panic");
        if (timeLeft <= 0) endGame();

        const m = String(Math.floor(timeLeft/60)).padStart(2,"0");
        const s = String(timeLeft%60).padStart(2,"0");
        timerDisplay.textContent = `${m}:${s}`;
    }, 1000);
}

function screamer(audioId, imgName) {
    const div = document.createElement("div");
    div.className = "screamer";
    div.innerHTML = `<img src="${imgName}.jpg">`;
    document.body.appendChild(div);
    const sound = document.getElementById(audioId);
    if(sound) {
        sound.currentTime = 0;
        sound.play();
    }
    setTimeout(()=>div.remove(), 1500);
}

function endGame() {
    clearInterval(timerInterval);
    screamer("screamEnd", "endtimes");
}

input.addEventListener("keydown", e => {
    if (e.key !== "Enter") return;
    const code = input.value.toUpperCase();
    input.value = "";
    
    // Глобальні коди
    if (code === "TEST") screamer("scream1", "test");
    if (code === "TIME+") timeLeft += 300;

    advance(code);
});

function advance(code) {
    if (stage === 1 && code === "НЕТУРУЧЕКНЕТКОНФЕТОК") {
        stage = 2;
        input.classList.add("hidden");
        stage2();
    }
}

/* ===== ЕТАП 2 ===== */
function stage2() {
    const stage2Text = `Молодець, ти віднайшов перший код, але поки що ми надто далеко від правди (крівди). 

Ми перехопили повідомлення, яке хтось дуже не хотів, щоб ви прочитали.

Воно зашифроване примітивним, але ефективним методом.
Його використовували ще тоді, коли Рим не підозрював,
що колись зʼявиться Шрек.

Судак-тудак.....
Щось не так.... здається наші пр.... як.......баа..г..
АГЕНТ! ось перех.... згадай.... 4 роки.... майже.... вище...

*NJ CPPPNCPP*

`;
    typeText(stage2Text, createFieldsStage2);
}

function createFieldsStage2() {
    const fields = document.createElement("div");
    fields.id = "stage2-container";
    const labels = ["ПОЛЕ1", "ПОЛЕ2", "ПОЛЕ3", "ПОЛЕ4", "ПОЛЕ5"];
    
    labels.forEach((label, i) => {
        const box = document.createElement("div");
        box.innerHTML = `<span>${label}: </span>`;
        const fInput = document.createElement("input");
        fInput.onkeydown = e => {
            if (e.key === "Enter") {
                if (fInput.value.toUpperCase() === "MI BOOOMBOO" && i === 2) {
                    fields.remove();
                    stage = 3;
                    stage3();
                } else {
                    timeLeft -= 60;
                    fInput.value = "";
                    screamer("scream1", "test");
                }
            }
        };
        box.appendChild(fInput);
        fields.appendChild(box);
    });
    terminal.appendChild(fields);
}

/* ===== ЕТАП 3 ===== */
function stage3() {
    const stage3Text = `
Йоу, бейба, відкрий пакунок під номером 2, ти це точно заслуговуєш. До речі бачив мої скриті послання? Сподіваюсь ти вмієш бачити скриті речі.

Час спливає, тому я думаю я дам тобі можливість поповнити його, ти ж цього хочеш? 

Тепер в тебе буде шанс 50/50, так би мовити сімпл-дімпл або попит.

В одне ти маєш ввести код на час, в інший код для продовження на наступний рівень. 
Якщо перепутаєш коди місцями, отримаєш штраф.

Тобі треба послухати запис, він трошки довгий, але звертай увагу на дрібні деталі, речі які він перераховує. 
Щось точно зайве. 
Абрівіатура допоможе тобі знайти сімпл, 
дімпл вкаже тобі шлях, тут прямим текстом. 
Але пам'ятаєш на якій мові був попередній код?

Попит найскладніше, бо тобі треба вміти рахувати, як саме? 
усе чуте це 1 а порожнеча між ними це 2.  
Якщо це складно для тебе, то не переймайся, бо загальне множення-39 дасть дату в яку хтось програв, а хтось переміг.
Але не кожен переможений зникає з історії, 
подумай про це.
`;

    typeText(stage3Text, () => {
        // Створюємо аудіоплеєр
        const audioControl = document.createElement("div");
        audioControl.innerHTML = `
            <p style="color:yellow">hacker.ogg</p>
            <button onclick="document.getElementById('hacker').play()">ВКЛЮЧИТИ ЗАПИС</button>
            <br><br>
        `;
        
        // Створюємо два поля
        const container = document.createElement("div");
        container.innerHTML = `
            <div style="margin-bottom:10px">
                <label>СІМПЛ-ДІМПЛ: </label>
                <input id="simpleInput" placeholder="???">
            </div>
            <div>
                <label>ПОПИТ: </label>
                <input id="popitInput" placeholder="???">
            </div>
        `;

        terminal.appendChild(audioControl);
        terminal.appendChild(container);

        const sInput = document.getElementById("simpleInput");
        const pInput = document.getElementById("popitInput");

        // Логіка для СІМПЛ-ДІМПЛ (Код на час)
        sInput.onkeydown = e => {
            if (e.key === "Enter") {
                if (sInput.value.toUpperCase() === "TERRARIACOMPASS") {
                    timeLeft += 600; // +10 хвилин
                    sInput.disabled = true;
                    sInput.style.color = "gray";
                    terminal.innerHTML += "<p style='color:cyan'>ЧАС ПОПОВНЕНО!</p>";
                } else {
                    screamer("scream1", "test");
                    timeLeft -= 60;
                }
            }
        };

        // Логіка для ПОПИТ (Код на продовження)
        pInput.onkeydown = e => {
            if (e.key === "Enter") {
                if (pInput.value.toUpperCase() === "GERMANY") {
                    stage = 4;
                    terminal.innerHTML = "ЕТАП 3 ЗАВЕРШЕНО. ПЕРЕХІД...";
                    setTimeout(stage4, 2000); // Перехід до вашої вікторини
                } else {
                    screamer("scream1", "test");
                    timeLeft -= 60;
                }
            }
        };
    });
}


/* ===== ЕТАП 4 ===== */
function stage4() {
    terminal.innerHTML = ""; // Очищуємо термінал
    
    const stage4Text = `
Звіт №47-А
Аналітик: ███████

У ході дослідження обʼєкта GREEN OGRE було зафіксовано численні відхилення.
Деякі співробітники повідомляють про зелені силуети.
Інші — про тварин, що спостерігають.
Частина персоналу почала безпричинно сміятися.

Перед усім, можеш відкрити пакунок 3, в ньому буде пояснення що робити з цим текстом далі:

"Neque porro quisquam est qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit..."
"Нет никого, кто любил бы боль саму по себе, кто искал бы её и кто хотел бы иметь её просто потому, что это боль.."

Проснувшись однажды утром после беспокойного сна, Грегор Замза обнаружил, что он у себя в постели превратился в страшное насекомое. 
Лежа на панцирнотвердой спине, он видел, стоило ему приподнять голову, свой коричневый, выпуклый, разделенный дугообразными чешуйками живот, на верхушке которого еле держалось готовое вот-вот окончательно сползти одеяло. 
Его многочисленные, убого тонкие по сравнению с остальным телом ножки беспомощно копошились у него перед глазами. «Что со мной случилось?» – подумал он. 
Это не было сном. Его комната, настоящая, разве что слишком маленькая, но обычная комната, мирно покоилась в своих четырех хорошо знакомых стенах. 
Над столом, где были разложены распакованные образцы сукон – Замза был коммивояжером, – висел портрет, который он недавно вырезал из иллюстрированного журнала и вставил в красивую золоченую рамку. 
На портрете была изображена дама в меховой шляпе и боа, она сидела очень прямо и протягивала зрителю тяжелую меховую муфту, в которой целиком исчезала ее рука. 
Затем взгляд Грегора устремился в окно, и пасмурная погода – слышно было, как по жести подоконника стучат капли дождя – привела его и вовсе в грустное настроение. 
«Хорошо бы еще немного поспать и забыть всю эту чепуху», – подумал он, но это было совершенно неосуществимо, он привык спать на правом боку, а в теперешнем своем состоянии он никак не мог принять этого положения. 
С какой бы силой ни поворачивался он на правый бок, он неизменно сваливался опять на спину. Закрыв глаза, чтобы не видеть своих барахтающихся ног, он проделал это добрую сотню раз и отказался от этих попыток только тогда, когда почувствовал какую-то неведомую дотоле, тупую и слабую боль в боку. 
«Ах ты, господи, – подумал он, – какую я выбрал хлопотную профессию! Изо дня в день в разъездах. Деловых волнений куда больше, чем на месте, в торговом доме, а кроме того, изволь терпеть тяготы дороги, думай о расписании поездов, мирись с плохим, нерегулярным питанием,

Знайшов слово - переклав - записав з заходу на схід.
`;

    typeText(stage4Text, () => {
        // Створюємо поле вводу спеціально для 4 етапу
        const inputContainer = document.createElement("div");
        inputContainer.style.marginTop = "20px";
        inputContainer.innerHTML = `
            <input id="inputStage4" placeholder="ENTER KEYWORD" style="width: 250px;">
        `;
        terminal.appendChild(inputContainer);

        const input4 = document.getElementById("inputStage4");
        input4.focus();

        input4.onkeydown = e => {
            if (e.key === "Enter") {
                const val = input4.value.toUpperCase().trim();
                if (val === "EYES") {
                    stage = 5;
                    terminal.innerHTML = "<p style='color:lime'>ДОСТУП ДО ЕТАПУ 5 ВІДКРИТО...</p>";
                    setTimeout(stage5, 2000); 
                } else {
                    screamer("scream1", "test"); // Скример за помилку
                    timeLeft -= 45;
                    input4.value = "";
                }
            }
        };
    });
}


let currentQuestion = 0;
const questions = [
    { hint: "1) Моє громадянство?", answer: "ГРОМАДЯНИН США" },
    { hint: "2) В скількох форсажах я знімався?", answer: "5" },
    { hint: "3) Остання робота на сьогодні, яка вийшла зі мною?", answer: "НЕЗЛАМНИЙ" },
    { hint: "4) Чиє в мене тату?", answer: "ПОЛІНЕЗІЙСЬКЕ" }
];

    /* ===== ЕТАП 5 ===== */
function stage5() {
    // 1. Очищаємо все зайве
    terminal.innerHTML = "";
    if (document.getElementById("input-container")) document.getElementById("input-container").classList.add("hidden");
    if (document.getElementById("quiz")) document.getElementById("quiz").classList.add("hidden");
    
    // 2. Виводимо вступний текст
    const introStage5 = `Агенте.
        Ми мусимо визнати — маскування зірване. Тепер усі знають, що ти тут.
    Одягни це. (Пакунок 4)
    Це не врятує ситуацію. Але протокол вимагає виглядати впевнено, навіть коли все пішло не так.

Це були складні завдання, визнаю, було бажання зробити ще більш асбсурдним, але як ти зрозумів, я надто лінивий щоб вставити сюди увесь код зі сторінки "Докажи що ти людина".
Проте, щось все ж таки є. Докажи що ти Двейн Скала Джонсон`;
    
    typeText(introStage5, () => {
        const btn = document.createElement("button");
        btn.textContent = "Я ГОТОВИЙ ПІДТВЕРДИТИ ОСОБИСТІСТЬ";
        btn.onclick = startRockChallenge;
        terminal.appendChild(btn);
    });
}

function startRockChallenge() {
    terminal.innerHTML = ""; // Видаляємо текст і кнопку
    const container = document.getElementById("stage5-container");
    container.classList.remove("hidden");
    
    const textArea = document.getElementById("secret-text-area");
    const rawText = `Двейн Джонсон відомий не лише своїми ролями у блокбастерах, а й незвичною життєвою історією. Він народився у спортивній родині, де реслінг був майже спадковою справою. 
    Саме тому його фізична форма завжди була частиною його образу — як на рингу, так і на великому екрані. Хоча його коріння пов’язані з Самоа, офіційно Двейн є громадянином США, що неодноразово підкреслював у своїх інтерв’ю.

Його шлях у кіно розвивався поступово, але справжній вибух популярності стався після появи у франшизі «Форсаж». Цікаво, що персонаж Люка Гоббса не планувався як центральний, але глядачі швидко зробили його одним з улюбленців серії. 
Загалом Двейн Джонсон знявся у п’яти фільмах, пов’язаних із франшизою «Форсаж»: Fast Five, Fast & Furious 6, Furious 7, The Fate of the Furious та спін-офі Hobbs & Shaw.

Поза межами автоперегонів і вибухів, Джонсон активно працює як продюсер і бізнесмен. Він часто говорить про дисципліну, ранні підйоми та «культуру праці», яку намагається прищепити своїй команді. Ці риси добре відображаються і в його ролях — майже 
завжди це персонажі, які беруть відповідальність на себе, навіть коли ситуація здається безнадійною.

Окремої уваги заслуговують його татуювання. Найбільш помітне — велике полінезійське тату, яке покриває плече та частину грудей. Воно має глибокий символізм: у візерунках зашифровані історії його родини, 
пам’ять про предків, символи захисту, сили та життєвого шляху. Інше відоме тату — голова бика (Brahma Bull), що уособлює силу, впертість і його сценічне минуле у реслінгу.

Навіть у комедійних ролях Двейн залишається впізнаваним: харизма, самоіронія та фірмова посмішка стали його візитівкою. Він часто озвучує анімаційних персонажів, але паралельно продовжує зніматися у масштабних проєктах, де поєднуються екшн і гумор.

Останньою на сьогодні роботою, яка вийшла з його участю, є фільм Незламний «The Smashing Machine» (2025) — американська біографічна спортивна драма, сценаристом і режисером якої став Бенні Сафд.

Головну роль виконав Двейн Джонсон, який зобразив колишнього бійця змішаних єдиноборств Марка Керра. Також у фільмі зіграли Емілі Блант, Ліндсі Гевін, Олександр Усик, Раян Бейдер і Ішії Сатоші.`;

    // Створюємо ефект прихованих букв
    textArea.innerHTML = rawText.split("").map(char => 
        `<span class="ghost-char" style="color: black; transition: color 0.3s;">${char}</span>`
    ).join("");

    // Логіка підсвічування при наведенні
    textArea.addEventListener("mouseover", e => {
        if (e.target.classList.contains("ghost-char")) {
            e.target.style.color = "#00ff66";
            setTimeout(() => { e.target.style.color = "black"; }, 1000); // згасає через 1 сек
        }
    });

    updateQuestion();
}

function updateQuestion() {
    const hintBox = document.getElementById("hint-box");
    const input = document.getElementById("inputStage5");
    
    if (currentQuestion < questions.length) {
        hintBox.textContent = questions[currentQuestion].hint;
        input.value = "";
        input.onkeydown = e => {
            if (e.key === "Enter") {
                if (input.value.toUpperCase().trim() === questions[currentQuestion].answer) {
                    currentQuestion++;
                    if (currentQuestion === questions.length) {
                        alert("Етап 5 завершено! Перехід до Етапу 6...");
                        stage6(); // Виклик наступного етапу //////////////////////////////////////////////
                    } else {
                        updateQuestion();
                    }
                } else {
                    timeLeft -= 30;
                    screamer("scream1", "test");
                    input.value = "";
                }
            }
        };
    }
}


/* ===== ЕТАП 6 ===== */
let clickCount = 500;
let colorIndex = 0;
const acidicColors = ["#FF00FF", "#00FFFF", "#FFFF00", "#FF0000"]; // Маджента, Ціан, Жовтий, Червоний

function stage6() {
    // 1. Очищення екрана
    terminal.innerHTML = "";
    document.getElementById("stage5-container").classList.add("hidden");
    
    // 2. Вступний текст
    const stage6Text = `Обладнення в наш час ніяке. Все треба робити самому.

Раніше для цього використовували хом'яків, а деякі кажуть що легенди завдяки цьому отримували багато і багато аспектів в Таумкрафті.


GREEN OGRE точно не очікує, що ти пройдеш це завдання, але це його помилка.

Але чесно, агенте, мене тебе шкода, ти справжній герой своєї країни, ми будемо пам'ятати тебе!

P.S. вагітним хворим на голову, людям з епілепсією, дотерам, сдвг-шникам, клоунам та карликам в шоколадних бікіні краще відійти від екрану...............................................................................................................................................................................................................`;

    typeText(stage6Text, () => {
        setTimeout(() => {
            terminal.innerHTML = "";
            document.getElementById("stage6-container").classList.remove("hidden");
            initClicker();
        }, 3000);
    });
}

function initClicker() {
    const btn = document.getElementById("mega-button");
    const counterDisplay = document.getElementById("click-counter");
    const overlay = document.getElementById("flash-overlay");
    const screamSound = document.getElementById("scream1"); // Використовуємо ваш тестовий звук

 // Функція для випадкового переміщення кнопки
    const moveButtonRandomly = () => {
        // Задаємо безпечні межі (наприклад, 10% відступу від країв екрана)
        const offset = 100;
        const x = Math.random() * (window.innerWidth - btn.offsetWidth - offset) + (offset / 2);
        const y = Math.random() * (window.innerHeight - btn.offsetHeight - offset) + (offset / 2);
        
        btn.style.position = "fixed";
        btn.style.left = `${x}px`;
        btn.style.top = `${y}px`;
        btn.style.zIndex = "10000"; // Щоб була поверх усього
    };

    btn.onclick = () => {
        if (clickCount > 0) {
            clickCount--;
            counterDisplay.textContent = clickCount;

            // --- Твоя нова умова: переміщення, коли залишилось 20 кліків ---
            if (clickCount <= 20) {
                moveButtonRandomly();
            }

            // Ефект спалаху
            overlay.style.backgroundColor = acidicColors[colorIndex];
            overlay.style.opacity = "0.8";
            setTimeout(() => { overlay.style.opacity = "0"; }, 50);

            // Звук
            screamSound.currentTime = 0;
            screamSound.play().catch(e => {});

            // Зміна індексу кольору
            colorIndex = (colorIndex + 1) % acidicColors.length;

            if (clickCount === 0) {
                // Повертаємо кнопку на місце перед тим як сховати (про всяк випадок)
                btn.style.position = "";
                finishClicking();
            }
        }
    };
}

function finishClicking() {
    document.getElementById("click-counter").classList.add("hidden");
    document.getElementById("mega-button").classList.add("hidden");
    
    document.getElementById("final-code-display").classList.remove("hidden");
    document.getElementById("final-input-stage6").classList.remove("hidden");

    const input6 = document.getElementById("inputStage6");
    input6.focus();
    input6.onkeydown = e => {
        if (e.key === "Enter") {
            if (input6.value.toUpperCase() === "СДВГ") {
                alert("ПРОТОКОЛ ПОРУШЕНО. ПЕРЕХІД ДО ЕТАПУ 7");
                stage12(); // Виклик наступного етапу
            } else {
                timeLeft -= 100; // Жорсткий штраф
                input6.value = "";
                screamer("scream1", "test");
            }
        }
    };
}


/* ===== Звук клавіш ===== */
const audioCtx = new (window.AudioContext || window.webkitAudioContext)();

function playClickSound() {
    const oscillator = audioCtx.createOscillator();
    const gainNode = audioCtx.createGain();

    oscillator.type = 'square'; // Квадратна хвиля дає більш "механічний" звук
    oscillator.frequency.setValueAtTime(150, audioCtx.currentTime);
    oscillator.frequency.exponentialRampToValueAtTime(40, audioCtx.currentTime + 0.1);

    gainNode.gain.setValueAtTime(0.1, audioCtx.currentTime);
    gainNode.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.1);

    oscillator.connect(gainNode);
    gainNode.connect(audioCtx.destination);

    oscillator.start();
    oscillator.stop(audioCtx.currentTime + 0.1);
}

// Глобальний обробник для всіх input на сторінці
document.addEventListener('keydown', (e) => {
    if (e.target.tagName === 'INPUT') {
        playClickSound();
    }
});


/* ===== ЕТАП 12 ===== */
function stage12() {

    terminal.innerHTML = "";
    document.getElementById("stage5-container").classList.add("hidden");
    
    const st6 = document.getElementById("stage6-container");
    if (st6) st6.classList.add("hidden");
    if (document.getElementById("flash-overlay")) document.getElementById("flash-overlay").remove();

    
    terminal.innerHTML = "";
    
    const text12 = `
Агенте, ТЕРМІНОВО!
Ми змогли вивантажити бекапи об'єкту GREEN OGRE, але це щось... дивне...
Без стопки не розібратися, тому нумо за справу. Мені здається це все не просто так, щось в цьому є.
ВІн би ніколи не зберігав такої інформаціїї на Комбоджийських серверах...
`;

   typeText(text12, () => {
        const container = document.createElement("div");
        container.className = "stage12-grid";
        container.innerHTML = `
            <div id="audio-player" style="border: 1px solid #00ff66; padding: 10px; margin-bottom: 15px; background: #010;">
                <label style="color: #00ff66; display: block; margin-bottom: 5px;">АУДІО-ДОКАЗ: старий.mp3</label>
                <button id="playBtn" style="cursor:pointer;">▶ ВІДТВОРИТИ</button>
                <button id="pauseBtn" style="cursor:pointer;">II ПАУЗА</button>
                <audio id="oldRecord" src="старий.mp3"></audio>
            </div>


            <div id="yellow-container"></div>

            <div class="right-code-container">
                <label>Мій номер телефону</label><br>
                <input id="rightCode" placeholder="ENTER CODE">
            </div>

            <div class="bottom-code-container">
                <label>Секрет башти</label><br>
                <input id="towerSecret" placeholder="...">
            </div>

            <audio id="smsSound" src="смс.mp3"></audio>
        `;
        
        terminal.appendChild(container);

        // Логіка кнопок аудіо
        const audio = document.getElementById("oldRecord");
        document.getElementById("playBtn").onclick = () => audio.play();
        document.getElementById("pauseBtn").onclick = () => audio.pause();

        // Стан перевірки кодів
        let rightCodeOk = false;
        let towerSecretOk = false;

        function checkProgress() {
            if (towerSecretOk) {
                terminal.innerHTML = "<h2 style='color:lime'>ДОСТУП ДО ЕТАПУ 13 ВІДКРИТО...</h2>";
                setTimeout(stage13, 2000);
            }
        }

        // Таймер на 2 хвилини для жовтого повідомлення
        setTimeout(() => {
            const yellowContainer = document.getElementById("yellow-container");
            if (yellowContainer) {
                const yellowMsg = document.createElement("div");
                yellowMsg.id = "yellow-msg";
                yellowMsg.innerHTML = ".хї б олевирп ьсидук ец овилжоМ .ьтсікьлік хї инов иланз ич овакіц ,А з ясьтєаничоп есв ощ ,иланз ен ещ ідот идюл ощ ,іратс икьлітсаН .іратс-іратс іт ікніротс а ,коніротс акьлікед єам анавохирп акя ,яіротсі аТ";
                yellowContainer.appendChild(yellowMsg);
                
                const sms = document.getElementById("smsSound");
                if(sms) sms.play().catch(e => console.log("Потрібна взаємодія з екраном для звуку"));
            }
        }, 120000); 


              // --- ОБРОБКА ПОЛІВ (ЗАМІНІТЬ ЦЕЙ БЛОК) ---
        // Поле "Праворуч код"
        const rInput = document.getElementById("rightCode");
        rInput.onkeydown = e => {
            if(e.key === "Enter") {
                 if(e.target.value.trim() === "5551") {
                    // 1. Блокуємо поле та підсвічуємо
                    e.target.style.borderColor = "lime";
                    e.target.disabled = true;

                     // 2. Створюємо напис "КРАСАВА"
                    const successMsg = document.createElement("div");
                    successMsg.innerHTML = "КРАСАВА ЦЕЙ КОД НІЧОГО НЕ РОБИТЬ, БО Я ЗАПЛУТАВСЯ В ЛОГІЦІ";
                    successMsg.style.color = "lime";
                    successMsg.style.fontSize = "14px";
                    successMsg.style.marginTop = "5px";
                    successMsg.style.fontWeight = "bold";
                    
                    // Додаємо його в контейнер після поля вводу
                    e.target.parentNode.appendChild(successMsg);
                } else {
                    screamer("scream1", "test");
                     e.target.value = ""; 
                }
            }
        };

        // Обробка полів
        //document.getElementById("rightCode").onkeydown = e => {
         //   if(e.key === "Enter") {
             //   if(e.target.value.toUpperCase().trim() === "5551") { // Змініть на свій код
                    //rightCodeOk = true;
                    //e.target.style.borderColor = "lime";
           //         e.target.disabled = true;
           //         checkProgress();
          //      } else {
          //          screamer("scream1", "test");
            //        timeLeft -= 30;
           //     }
        //    }
    //    };
        
        document.getElementById("towerSecret").onkeydown = e => {
            if(e.key === "Enter") {
                if(e.target.value.toUpperCase().trim() === "DEADDRAGON") {
                    towerSecretOk = true;
                    e.target.style.borderColor = "lime";
                    e.target.disabled = true;
                    checkProgress();
                } else {
                    screamer("scream1", "test");
                    timeLeft -= 30;
                }
            }
        };
    });
}

/* ===== ЕТАП 13 ===== */
    
function stage13() {
    terminal.innerHTML = "";
    
    // Створюємо контейнер етапу
    const container = document.createElement("div");
    container.className = "stage13-container";
    
    container.innerHTML = `
        <h2 style="color: red; text-shadow: 0 0 10px red; text-align: center;">
            Моршу розчарований в тобі, він злий і зараз з'їсть всю твою оперативну пам'ять!
        </h2>
        
        <video class="morshu-video" autoplay loop muted style="display: block; margin: 20px auto; max-width: 80%;">
            <source src="моршу.mp4" type="video/mp4">
            Ваш браузер не підтримує відео.
        </video>
        
        <div style="text-align: center;">
            <button class="reboot-btn" id="rebootBtn">ПЕРЕЗАВАНТАЖЕННЯ СИСТЕМИ</button>
        </div>
    `;
    
    terminal.appendChild(container);

    const rebootBtn = document.getElementById("rebootBtn");

    rebootBtn.onclick = () => {
        // 1. Очищуємо термінал
        terminal.innerHTML = "";
        document.body.style.background = "black";
        
        // 2. Створюємо та додаємо відео моршу2.mp4
        const finalVideo = document.createElement("video");
        finalVideo.src = "моршу2.mp4";
        finalVideo.autoplay = true;
        finalVideo.loop = true;
        
        // Стилі для центрування та розміру
        finalVideo.style.position = "fixed";
        finalVideo.style.top = "50%";
        finalVideo.style.left = "50%";
        finalVideo.style.transform = "translate(-50%, -50%)"; // Ідеальне центрування
        finalVideo.style.maxWidth = "80vw";  // 80% ширини екрану
        finalVideo.style.maxHeight = "80vh"; // 80% висоти екрану
        finalVideo.style.boxShadow = "0 0 50px rgba(255, 0, 0, 0.5)"; // Ефект світіння навколо
        finalVideo.style.zIndex = "9999";
        
        document.body.appendChild(finalVideo);

        // 3. Через 50000 мс (50 секунд) прибираємо відео і йдемо на етап 7
        setTimeout(() => {
            finalVideo.pause();
            finalVideo.remove();
            
            // Повертаємо фон терміналу перед переходом
            document.body.style.background = ""; 
            
            if (typeof stage14 === "function") {
                stage14();
            } else {
                console.error("Функція stage7 не знайдена!");
            }
        }, 50000); 
    };
}


/* ===== ЕТАП 14 ФОРСАЖ ===== */

function stage14() {
    terminal.innerHTML = "";
    
    // 1. Повні тексти описів
    const stories = [
        "Поліцейський під прикриттям проникає у світ нічних вуличних перегонів Лос-Анджелеса. Він зближується з харизматичним лідером гонщиків і поступово починає сумніватися, на чиєму він боці. Пограбування вантажівок і перша поява теми «сім’ї». Фінал — вибір між законом і дружбою.",
        "Головний герой уже не коп, а втікач. Його змушують співпрацювати з поліцією, щоб викрити наркобарона в Маямі. Поруч — старий друг дитинства, нові тачки і ще більше стилю. Домініка тут немає, але швидкості — з надлишком.",
        "Новий герой потрапляє до Токіо і відкриває для себе світ дрифту. Він втягується в конфлікт з якудзою та їхнім «королем доріг». Тут гинуть важливі персонажі, але це стане зрозуміло лише пізніше. Атмосфера максимально відрізняється від інших частин.",
        "Стара команда знову збирається разом через особисту трагедію. Герої працюють по різні боки закону, але проти спільного ворога. Погоні повертаються до коріння — швидкі, жорсткі та приземлені. Саме тут починається нова ера франшизи.",
        "Дія переноситься до Ріо-де-Жанейро. Команда планує велике пограбування, щоб отримати свободу раз і назавжди. До них приєднується агент, який згодом стане союзником. Фінал з сейфом на ланцюгах став культовим.",
        "Команді пропонують амністію в обмін на місію проти міжнародної банди. З’являється ворог, пов’язаний з минулим одного з героїв. Гонки тепер відбуваються вже не тільки на вулицях, а й на злітних смугах. Родина знову стає повною… майже.",
        "Новий антагоніст мститься за свого брата. Ставки стають особистими, а небезпека — смертельною. Тут є стрибки між хмарочосами та спецоперації по всьому світу. Фінал — емоційне прощання, яке стало легендарним.",
        "Один із головних героїв раптово зраджує команду. Причини цього розкриваються поступово й дуже болісно. З’являється новий глобальний ворог — холодний і розумний. Команда змушена працювати з колишніми противниками.",
        "Минуле знову наздоганяє головного героя — цього разу у вигляді рідного брата. Розкриваються дитячі травми та старі конфлікти. Фізика остаточно відпочиває: машини літають, магніти роблять дивні речі. Але тема сім’ї залишається центром історії.",
        "Команда стикається з найнебезпечнішим ворогом за всю історію. Він діє не силою, а продуманою помстою, руйнуючи життя крок за кроком. Події розгортаються по всьому світу і закінчуються на жорсткому кліфгенгері. Це лише перша частина фіналу.",
        "Історія ще не завершена. Герої розкидані, багато хто під загрозою, а світ — на межі катастрофи. Це має бути кульмінація всієї саги, де зійдуться старі вороги й союзники. Остаточна відповідь на питання: що означає бути сім’єю."
    ];

    // 2. Назви фільмів для вибору
    const filmTitles = [
        "The Fast and the Furious (2001) — Форсаж",
        "2 Fast 2 Furious (2003) — Подвійний форсаж",
        "The Fast and the Furious: Tokyo Drift (2006) — Токійський дрифт",
        "Fast & Furious (2009) — Форсаж 4",
        "Fast Five (2011) — Форсаж 5",
        "Fast & Furious 6 (2013) — Форсаж 6",
        "Furious 7 (2015) — Форсаж 7",
        "The Fate of the Furious (2017) — Форсаж 8",
        "F9: The Fast Saga (2021) — Форсаж 9",
        "Fast X (2023) — Форсаж 10",
        "Fast X: Part 2 / Fast 11 — Форсаж 11"
    ];

    // 3. Створення рандомного порядку
    let indices = Array.from({length: 11}, (v, k) => k);
    indices.sort(() => Math.random() - 0.5);

    const container = document.createElement("div");
    container.style.padding = "20px";
    
    let gridHtml = `
        <h2 style="color: #00ff66; text-align: center; margin-bottom: 20px;">ВСТАНОВІТЬ ХРОНОЛОГІЮ СІМ'Ї</h2>
        <div style="display: flex; flex-direction: column; gap: 15px;">
    `;

    indices.forEach(i => {
        gridHtml += `
            <div style="border: 1px solid #00ff66; padding: 15px; background: rgba(0,20,0,0.9); display: flex; justify-content: space-between; align-items: center;">
                <div style="width: 85%;">
                    <p style="font-size: 0.95em; color: #ccc; margin-bottom: 10px; line-height: 1.4;">${stories[i]}</p>
                    <select class="fast-select" data-index="${i}" style="width: 100%; background: #000; color: #00ff66; border: 1px solid #00ff66; padding: 8px;">
                        <option value="" disabled selected>Оберіть фільм з переліку...</option>
                        ${filmTitles.map(t => `<option value="${t}">${t}</option>`).join('')}
                    </select>
                </div>
                <div class="status-light" id="light-${i}" style="width: 25px; height: 25px; border-radius: 50%; background: #222; border: 2px solid #000; margin-left: 15px;"></div>
            </div>
        `;
    });

    gridHtml += `
        </div>
        <div style="text-align: center; margin-top: 30px;">
            <button id="freakBtn" style="padding: 20px 40px; font-size: 22px; background: #ff0000; color: white; border: none; cursor: pointer; font-weight: bold; text-transform: uppercase;">Перевірка на фріка</button>
        </div>
        <audio id="familyAudio" src="fam.MP3"></audio>
        <audio id="freakAudio" src="freak.ogg"></audio>
    `;

    container.innerHTML = gridHtml;
    terminal.appendChild(container);

   // 4. Логіка звуків та перевірки
    const familyAudio = document.getElementById("familyAudio");
    const freakAudio = document.getElementById("freakAudio");
    const selects = document.querySelectorAll(".fast-select");

    // Функція для безпечного відтворення
    const playSound = (audioElement) => {
        if (audioElement) {
            audioElement.pause(); // Зупиняємо, якщо вже грає
            audioElement.currentTime = 0; // Повертаємо на початок
            audioElement.play().catch(e => {
                console.warn("Браузер заблокував звук до взаємодії користувача:", e);
            });
        }
    };

    selects.forEach(s => {
        s.onchange = () => {
            playSound(familyAudio);
        };
    });

    document.getElementById("freakBtn").onclick = () => {
        playSound(freakAudio);
        
        let win = true;
        selects.forEach(s => {
            const idx = parseInt(s.getAttribute("data-index"));
            const light = document.getElementById(`light-${idx}`);
            if (s.value === filmTitles[idx]) {
                light.style.background = "#00ff00";
                light.style.boxShadow = "0 0 15px #00ff00";
            } else {
                light.style.background = "#ff0000";
                light.style.boxShadow = "0 0 15px #ff0000";
                win = false;
            }
        });

        if (win) {
            setTimeout(() => {
                terminal.innerHTML = "";
                document.body.style.background = "black";
                const h1 = document.createElement("h1");
                h1.innerHTML = "У ВАС СІНДРОМ ТУРЕТА";
                h1.style.cssText = "color: white; font-size: 80px; text-align: center; margin-top: 20vh; text-shadow: 0 0 20px red;";
                document.body.appendChild(h1);
                
                setTimeout(() => {
                    h1.remove();
                    if(typeof stage7 === "function") stage7();
                }, 5000);
            }, 1500);
        }
    };
}
    



    
    
/* ===== ЕТАП 7 ===== */
function stage7() {
    // Ховаємо Етап 6
    const st6 = document.getElementById("stage6-container");
    if (st6) st6.classList.add("hidden");
    if (document.getElementById("flash-overlay")) document.getElementById("flash-overlay").remove();

    terminal.innerHTML = "";

    const stage7Text = `Відкриваєш пакунок 5, голова

Вони ніяк не пов'язані між собою, як ти міг зрозуміти.

Тепер просто шараш рандомні питання, бо мені в ПРИКОЛ 

Тобто, все так, Агенте, GREEN-OGRE намагається зламати нас, ти вже бачив його силу. 
Він часто перекручує наші повідомлення, і відверто глузує з нас. 
Тепер ми розуміємо, чому саме тебе було обрано на це завдання, ніхто інший не знає відповіді на ці надскладні питання. 
Можливо частинка об'єкту нашого дослідження є у вас....


Не звертай уваги, не гай час, якого й без того мало. Ось тобі допомога!
Наші хакери змогли зламати жорсткий диск  GREEN-OGRE і ось що вони знайшли біля Смітника - TIME+
Це секретна одноразова, біохімічно-термоядерна сполука, яка розриває час та матерію. Звісно, якби перед нами не стояла така важлива ціль, 
ніхто б не дозволив тобі використовувати її. Тому поки керивницвто не побачило, не гай часу! `;

    typeText(stage7Text, () => {
        const container = document.getElementById("stage7-container");
        const quizFields = document.getElementById("quiz-fields");
        container.classList.remove("hidden");
        terminal.appendChild(container);

        const questions = [
            { q: "1. Повна назва ДДМА:", a: "ДОНБАСЬКА ДЕРЖАВНА МАШИНОБУДІВНА АКАДЕМІЯ" },
            { q: "2. Те, що неможливо продати чи купити, але всі намагаються:", a: "СЛОН" },
            { q: "3. Точна кількість шкоди від гачка товстуна (на 1 рівні):", a: "150" },
            { q: "4. Яка в мене відеокарта?", a: "GEFORCE GTX 4060" },
            { q: "5. Що у мене в кармані?", a: "НІЧОГО" },
            { q: "6. Традиційний подарунок на день народження:", a: "АНТИСТРЕС" },
            { q: "7. Кодове слово з конверту?", a: "ОБАЛДУЙ" }
        ];

        questions.forEach((item, index) => {
            const wrap = document.createElement("div");
            wrap.id = `q-wrap-${index}`;
            wrap.innerHTML = `
                <label style="display:block; color:#00ff66; margin-bottom:5px;">${item.q}</label>
                <input type="text" class="quiz-input" data-answer="${item.a}" placeholder="Введіть відповідь..." style="width:100%;">
            `;
            quizFields.appendChild(wrap);
        });

        // Додаємо перевірку для кожного інпуту
        const inputs = document.querySelectorAll(".quiz-input");
        inputs.forEach(input => {
            input.onkeydown = (e) => {
                if (e.key === "Enter") {
                    const userAnswer = input.value.toUpperCase().trim();
                    const correctAnswer = input.getAttribute("data-answer");

                    if (userAnswer === correctAnswer) {
                        input.parentElement.remove(); // Видаляємо все поле з питанням
                        checkStage7Complete();
                    } else {
                        timeLeft -= 20; // Штраф за неправильну відповідь
                        input.style.borderColor = "red";
                        setTimeout(() => { input.style.borderColor = "#00ff66"; }, 500);
                        screamer("scream1", "test");
                    }
                }
            };
        });
    });
}

function checkStage7Complete() {
    const remainingQuestions = document.querySelectorAll(".quiz-input");
    if (remainingQuestions.length === 0) {
        document.getElementById("stage7-container").innerHTML = "<h2 style='color:lime; text-align:center;'>ВСІ КОДИ ПРИЙНЯТО. ПЕРЕХІД ДО ЕТАПУ 8...</h2>";
        setTimeout(() => {
            stage8(); // Сюди додасте виклик 8 етапу
            alert("Етап 7 пройдено!"); 
        }, 2000);
    }
}
    
/* ===== ЕТАП 8 ===== */
    
function stage8() {
    // Ховаємо Етап 7
    document.getElementById("stage7-container").classList.add("hidden");
    terminal.innerHTML = "";

    const stage8Text = `Ой-ой-ой, що це? в нас якесь термінове звернення від Джей Джона Джеймсона!!!

- АЛО, МЕНЕ ЧУТНО? 
Так от, ПРИВІТ ПІТЕР, ой, не та репліка.
Чому ти досі не приніс мені фотографії Людини-Павука!?

ХУТКО!!!!!!!!`;

    typeText(stage8Text, () => {
        document.getElementById("stage8-container").classList.remove("hidden");
        
        const fileInput = document.getElementById("photo-upload");
        fileInput.onchange = function() {
            if (this.files && this.files[0]) {
                // Граємо аудіо
                const audio = document.getElementById("spidermanAudio");
                if(audio) audio.play().catch(e => console.log("Audio play error"));

                document.getElementById("upload-status").innerHTML = "ФОТО ОТРИМАНО! АНАЛІЗ... ПЕРЕВІРКА НА павукообразність...";
                
                // Через 30 секунд перехід
                setTimeout(() => {
                    stage9();
                }, 15000);
            }
        };
    });
}


    
/* ===== ЕТАП 9 ===== */

function stage9() {
    // 1. Очищуємо все
    document.getElementById("stage8-container").classList.add("hidden");
    document.body.classList.add("alarm-bg");
    terminal.innerHTML = "";

    // 2. Текст тривоги
    const alarmText = document.createElement("div");
    alarmText.className = "scrolling-text";
    alarmText.textContent = "УВАГА! УВАГА! ЦЕ НЕ НАВЧАЛЬНА ТРИВОГА!";
    document.body.appendChild(alarmText);

    // 3. Через 10 секунд — повна темрява
    setTimeout(() => {
        alarmText.remove();
        document.body.classList.remove("alarm-bg");
        
        // Створюємо "чорний екран" поверх усього
        let blackout = document.getElementById("blackout");
        if (!blackout) {
            blackout = document.createElement("div");
            blackout.id = "blackout";
            document.body.appendChild(blackout);
        }
        blackout.style.display = "flex";
        blackout.innerHTML = "Кто прочитал тот гей";

        // 4. Очікування натискання F
        const handleF = (e) => {
            if (e.key.toLowerCase() === 'f' || e.key.toLowerCase() === 'а') {
                document.removeEventListener('keydown', handleF);
                blackout.style.display = "none";
                stage10(); // Перехід до фіналу
            }
        };
        document.addEventListener('keydown', handleF);
    }, 10000);
}

/* ===== ЕТАП 10 ===== */

function stage10() {
    // Ховаємо blackout overlay
    const blackout = document.getElementById("blackout");
    if (blackout) blackout.style.display = "none";
    document.body.classList.remove("alarm-bg"); // Видаляємо червоне мерехтіння

    terminal.innerHTML = "";
    document.getElementById("stage10-container").classList.remove("hidden");

    const initialOgreText = `ХАХАХАХАХА а ось і я, GREEN OGRE
    Не очікував що ти з'явишся так швидко.... 
    Ой, а що це за кнопочка тут біля мене? 
    
    Хай там як, ти не наважишся зробити цей вибір.`;
    
    document.getElementById("ogre-dialogue").innerHTML = initialOgreText;

    const restartButton = document.getElementById("restart-button");
    const finalChoiceSection = document.getElementById("final-choice-section");

    restartButton.onclick = () => {
        // Запускаємо фінальний скример
        screamer("finalScreamerAudio", "finalA");

// 2. Створюємо елемент картинки скримера
    const screamerImg = document.createElement("img");
    screamerImg.src = "finalO.jfif"; // ЗАМІНИ НА СВОЮ НАЗВУ ФАЙЛУ (напр. screamer.jpg)
    
    // Стилі, щоб картинка була на весь екран поверх усього
    screamerImg.style.position = "fixed";
    screamerImg.style.top = "0";
    screamerImg.style.left = "0";
    screamerImg.style.width = "100vw";
    screamerImg.style.height = "100vh";
        screamerImg.style.objectFit = "contain";
        creamerImg.style.backgroundColor = "black";
    screamerImg.style.zIndex = "100000";   // Максимальний пріоритет
    
    // Додаємо картинку в body
    document.body.appendChild(screamerImg);
        
        // Змінюємо текст після скримера
        setTimeout(() => {
            screamerImg.remove();
            const afterScreamerText = `Ти реально думав що мені нічого робити, як тільки-но зациклити мій кашерно-неймовірний квест? 
Якір-мені в сраку, так ти сміливий.

Отже, це останній вибір, тепер все в твоїх брудних лапах і ти отримаєш той дурний код.`;
            document.getElementById("ogre-dialogue").innerHTML = afterScreamerText;
            restartButton.remove(); // Прибираємо кнопку рестарту
        }, 100000); // Час скримера
    };

    // Логіка для вибору та переходу на Етап 11
    document.getElementById("send-choice-button").onclick = () => {
        stage11();
    };
}



    
/* ===== ЕТАП 11 ===== */
function stage11() {
    // Ховаємо попередній етап
    const st10 = document.getElementById("stage10-container");
    if (st10) st10.classList.add("hidden");
    
    document.getElementById("stage11-container").classList.remove("hidden");

    const numbersGrid = document.getElementById("numbers-grid");
    numbersGrid.innerHTML = ""; // Очищуємо на випадок повторного запуску
    
    const specialNumbers = [38, 0, 994, 831, 255]; 
    let foundSpecialCount = 0;
    const specialSpans = []; 

    // Створюємо фрагмент документа для швидшого рендерингу 10000 елементів
    const fragment = document.createDocumentFragment();

    for (let i = 0; i <= 10000; i++) {
        const span = document.createElement("span");
        span.textContent = i;
        span.style.padding = "2px 4px";
        span.style.color = "#222"; // Майже невидимі на чорному фоні
        span.style.transition = "color 0.1s";

        // Перевіряємо, чи є число особливим
        const isSpecial = specialNumbers.includes(i);

        if (isSpecial) {
            span.classList.add("special-number");
            // Тільки для особливих чисел додаємо реакцію на курсор
            span.onmouseover = function() {
                if (this.style.color !== "red") {
                    this.style.color = "red"; // Світиться червоним при наведенні
                }
            };
            
            span.onmouseout = function() {
                // Якщо ще не клікнули (не зафіксували), повертаємо колір назад
                if (!this.classList.contains("activated")) {
                    this.style.color = "#222";
                }
            };

            span.onclick = function() {
                if (!this.classList.contains("activated")) {
                    this.classList.add("activated");
                    this.style.color = "red";
                    this.style.fontWeight = "bold";
                    this.style.textShadow = "0 0 10px red";
                    
                    foundSpecialCount++;
                    
                    // Зберігаємо для фінального екрану
                    const clone = this.cloneNode(true);
                    specialSpans.push(clone);

                    if (foundSpecialCount === specialNumbers.length) {
                        setTimeout(() => revealFinalMessage(numbersGrid, specialSpans), 500);
                    }
                }
            };
        } else {
            // Для всіх інших чисел курсор нічого не робить
            span.style.cursor = "default";
        }

        fragment.appendChild(span);
    }
    
    numbersGrid.appendChild(fragment);
}

function revealFinalMessage(grid, specialSpans) {
    grid.innerHTML = ""; 
    grid.style.flexDirection = "column";
    grid.style.justifyContent = "center";
    grid.style.fontSize = "6em"; 

    // Виводимо знайдені цифри
    specialSpans.forEach(span => {
        span.style.margin = "10px";
        grid.appendChild(span);
    });

    const finalLabel = document.createElement("div");
    finalLabel.textContent = "Чекаю тебе, солоденький";
    finalLabel.style.fontSize = "0.3em"; // Відносно 6em основного тексту
    finalLabel.style.color = "white";
    finalLabel.style.marginTop = "20px";
    finalLabel.style.fontStyle = "italic";
    grid.appendChild(finalLabel);
}
    


/* ===== ЕТАП 12 ===== */
    
    
// Початковий запуск
typeText("АГЕНТЕ... Система чекає на КОД 1...", startTimer);

// Запуск першої сцени
typeText(`АГЕНТЕ, система дала збій... Шукайте код у Конверті №1.`, startTimer);


function checkQuiz(){
    if([...document.querySelectorAll(".light")]
        .every(l=>l.classList.contains("green"))){
        startCode5();
    }
}

function startCode5(){
    timerDisplay.style.display="none";
    document.body.innerHTML="<pre style='color:red'>SYSTEM FAILURE\nPRESS F</pre>";
    document.addEventListener("keydown",e=>{
        if(e.key.toUpperCase()==="F") location.reload();
    });
}

typeText(
`
АГЕНТЕ Богдан


, 
якщо ви читаєте це повідомлення — значить система дала збій. 

Або ми. 
Або ви.

Аналітичний Відділ фіксує аномальну активність, повʼязану з кодовою назвою GREEN OGRE.

Спочатку це виглядало як жарт.
Потім — як серія безглуздих артефактів.
А тепер — як загроза, природу якої ми не до кінця розуміємо.

У матеріалах фігурують:
– огр зеленого кольору
– тварини, які не повинні бути тут
– предмети, що не мають сенсу
– і ви

Ми не знаємо, чому саме ви були обрані.
Але всі попередні кандидати не витримали абсурду.

Для отримання доступу до Обʼєкта Ω вам необхідно пройти 6 етапів перевірки.

Шукай приховане серед того що бачиш, не довіряй друзям, власним очам, лише своєму павучому відчуттю.
Десь серед УСЬОГО тексту, який буде зустрчатися тобі будуть скриті посилання, частинки пазлів і гумору.

Ми довіряємо цю місію тобі, лише тобі. Ніхто інший не зможе впоратися з цим завданням. Цей текст немає жодного значення, просто
треба щоб він виглядав круто й загадково. Єдинне що дійсно важливе, і сподіваюсь ти це не пропустиш, це час. Він спливає, так швидко, 
що навіть твій друг не може зробити щось корисне бо постійно з тобою грає. Так от, агенту, якщо він закінчиться, ти ніколи не дійдеш до фінального
етапу, і це означає що ти повільний лохобан, тому Сося передає привіт, і можеш починати.

Не шукайте логіку.
Почніть з Конверта №1.
`,
startTimer
);
</script>

</body>
</html>
